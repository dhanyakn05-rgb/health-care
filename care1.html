<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hospital Medical Record System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h2 {
            margin-top: 30px;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input {
            width: 250px;
            padding: 5px;
        }
        button {
            margin-top: 10px;
            padding: 6px 12px;
            cursor: pointer;
        }
        table {
            width: 80%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        table, th, td {
            border: 1px solid #000;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
    </style>
</head>
<body>

<h2>Add Patient Visit</h2>

<label>Patient ID:</label>
<input type="text" id="pid">

<label>Patient Name:</label>
<input type="text" id="pname">

<label>Age:</label>
<input type="number" id="age">

<label>Disease:</label>
<input type="text" id="disease">

<label>Allergy:</label>
<input type="text" id="allergy">

<label>Medicines:</label>
<input type="text" id="medicine">

<br>
<button onclick="saveVisit()">Save Visit</button>

<hr>

<h2>Patient Identification</h2>
<button>Scan Thumb</button><br><br>

<label>Enter Patient ID:</label>
<input type="text" id="searchId">
<button onclick="searchPatient()">Search</button>

<hr>

<h2>Patient Medical History</h2>

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Disease</th>
            <th>Allergy</th>
            <th>Medicines</th>
        </tr>
    </thead>
    <tbody id="historyTable">
    </tbody>
</table>

<script>
    let records = {};

    function saveVisit() {
        let pid = document.getElementById("pid").value;
        let disease = document.getElementById("disease").value;
        let allergy = document.getElementById("allergy").value;
        let medicine = document.getElementById("medicine").value;
        let date = new Date().toLocaleDateString();

        if (!records[pid]) {
            records[pid] = [];
        }

        records[pid].push({
            date,
            disease,
            allergy,
            medicine
        });

        alert("Patient Visit Saved");
        clearForm();
    }

    function searchPatient() {
        let pid = document.getElementById("searchId").value;
        let table = document.getElementById("historyTable");
        table.innerHTML = "";

        if (!records[pid]) {
            alert("No records found");
            return;
        }

        records[pid].forEach(r => {
            let row = `
                <tr>
                    <td>${r.date}</td>
                    <td>${r.disease}</td>
                    <td>${r.allergy}</td>
                    <td>${r.medicine}</td>
                </tr>
            `;
            table.innerHTML += row;
        });
    }

    function clearForm() {
        document.getElementById("pid").value = "";
        document.getElementById("pname").value = "";
        document.getElementById("age").value = "";
        document.getElementById("disease").value = "";
        document.getElementById("allergy").value = "";
        document.getElementById("medicine").value = "";
    }
</script>

</body>
</html>
